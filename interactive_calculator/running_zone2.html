<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heart Rate Zone Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 1rem;
      background: #f9fafb;
      color: #333;
    }
    h1, h2 {
      text-align: center;
    }
    .calculator {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      margin-top: 1.2rem;
      width: 100%;
      padding: 0.8rem;
      background: #0077ff;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
    }
    button:hover {
      background: #005fcc;
    }
    .result {
      margin-top: 1.5rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      padding: 0.6rem;
      border: 1px solid #ccc;
      text-align: center;
      font-size: 0.9rem;
    }
    th {
      background: #0077ff;
      color: #fff;
    }
    .highlight {
      background: #e0f7fa;
      font-weight: bold;
    }
    .note {
      margin-top: 1rem;
      font-size: 0.85rem;
      color: #555;
    }
    /* Graph styles */
    .graph-container {
      margin-top: 2rem;
    }
    .bar {
      display: flex;
      height: 30px;
      border: 1px solid #ccc;
      border-radius: 6px;
      overflow: hidden;
    }
    .zone {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      color: #fff;
      font-weight: bold;
    }
    .z1 { background: #6ab04c; } /* green */
    .z2 { background: #22a6b3; } /* teal */
    .z3 { background: #f0932b; } /* orange */
    .z4 { background: #eb4d4b; } /* red */
    .z5 { background: #8e44ad; } /* purple */
    .markers {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      margin-top: 0.5rem;
    }
    .threshold-line {
      position: relative;
      height: 0;
    }
    .line {
      position: absolute;
      top: -34px;
      width: 2px;
      height: 34px;
      background: #000;
    }
    .line-label {
      position: absolute;
      top: -48px;
      font-size: 0.7rem;
      background: #fff;
      padding: 2px 4px;
      border: 1px solid #ccc;
      border-radius: 4px;
      transform: translateX(-50%);
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <h1>Heart Rate Zone Calculator</h1>
  <div class="calculator">
    <label for="age">Age:</label>
    <input type="number" id="age" placeholder="Enter your age" min="10" max="100">

    <label for="resting">Resting Heart Rate (bpm):</label>
    <input type="number" id="resting" placeholder="Enter your resting HR" min="30" max="120">

    <button onclick="calculateZones()">Calculate Zones</button>

    <div class="result" id="result"></div>
  </div>

  <script>
    function calculateZones() {
      const age = parseInt(document.getElementById("age").value);
      const resting = parseInt(document.getElementById("resting").value);
      if (isNaN(age) || isNaN(resting)) {
        document.getElementById("result").innerHTML = "<p>Please enter valid numbers.</p>";
        return;
      }

      // Estimate Max HR
      const maxHR = 220 - age;
      const HRR = maxHR - resting;

      function targetHR(intensity) {
        return Math.round(resting + HRR * intensity);
      }

      // Zones (Karvonen method)
      const z1low = targetHR(0.5), z1high = targetHR(0.6);
      const z2low = targetHR(0.6), z2high = targetHR(0.7);
      const z3low = targetHR(0.7), z3high = targetHR(0.8);
      const z4low = targetHR(0.8), z4high = targetHR(0.9);
      const z5low = targetHR(0.9), z5high = targetHR(1.0);

      const zones = [
        {name: "Zone 1 (Recovery)", range: `${z1low} - ${z1high} bpm`, low: z1low, high: z1high, class: "z1"},
        {name: "Zone 2 (Aerobic)", range: `${z2low} - ${z2high} bpm`, low: z2low, high: z2high, class: "z2"},
        {name: "Zone 3 (Tempo)", range: `${z3low} - ${z3high} bpm`, low: z3low, high: z3high, class: "z3"},
        {name: "Zone 4 (Threshold)", range: `${z4low} - ${z4high} bpm`, low: z4low, high: z4high, class: "z4"},
        {name: "Zone 5 (VOâ‚‚ Max)", range: `${z5low} - ${z5high} bpm`, low: z5low, high: z5high, class: "z5"}
      ];

      // Thresholds
      const mt1 = targetHR(0.7);
      const mt2 = targetHR(0.85);

      // Build results table
      let html = `
        <h2>Results</h2>
        <p><b>Max HR (220 - age):</b> ${maxHR} bpm</p>
        <p><b>Resting HR:</b> ${resting} bpm</p>
        <p><b>HRR:</b> ${HRR} bpm</p>

        <table>
          <tr><th>Zone</th><th>Target HR Range</th></tr>
      `;

      zones.forEach(z => {
        let highlightClass = z.name.includes("Zone 2") ? "highlight" : "";
        html += `<tr class="${highlightClass}"><td>${z.name}</td><td>${z.range}</td></tr>`;
      });

      html += `</table>
        <p class="note"><b>MT1 (Aerobic Threshold):</b> ~${mt1} bpm<br>
        <b>MT2 (Anaerobic Threshold):</b> ~${mt2} bpm</p>
      `;

      // Build graph visualization
      let barHtml = `<div class="graph-container"><h3>Heart Rate Zone Graph</h3><div class="bar">`;

      zones.forEach(z => {
        const widthPercent = ((z.high - z.low) / (maxHR - resting)) * 100;
        barHtml += `<div class="zone ${z.class}" style="width:${widthPercent}%">${z.name.replace(/ .*/,'')}</div>`;
      });

      barHtml += `</div>`;

      // Add markers for resting and max HR
      barHtml += `
        <div class="markers"><span>${resting} bpm (Rest)</span><span>${maxHR} bpm (Max)</span></div>
        <div class="threshold-line">
          <div class="line" style="left:${((mt1-resting)/(maxHR-resting))*100}%;"></div>
          <div class="line-label" style="left:${((mt1-resting)/(maxHR-resting))*100}%;">MT1 ~${mt1} bpm</div>
          <div class="line" style="left:${((mt2-resting)/(maxHR-resting))*100}%;"></div>
          <div class="line-label" style="left:${((mt2-resting)/(maxHR-resting))*100}%;">MT2 ~${mt2} bpm</div>
        </div>
      </div>`;

      document.getElementById("result").innerHTML = html + barHtml;
    }
  </script>
</body>
</html>